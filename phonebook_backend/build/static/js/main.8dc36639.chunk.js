(this.webpackJsonpphonebook_part2=this.webpackJsonpphonebook_part2||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var o=t(0),c=t(1),r=t(15),i=t.n(r),a=t(5),u=t(3),s=function(e){var n=e.onSubmit,t=e.newName,c=e.newNumber,r=e.onChangeName,i=e.onChangeNumber;return Object(o.jsxs)("form",{onSubmit:n,children:[Object(o.jsxs)("div",{children:["Name: ",Object(o.jsx)("input",{value:t,onChange:r})]}),Object(o.jsxs)("div",{children:["Number ",Object(o.jsx)("input",{value:c,onChange:i})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"Add person"})})]})},l=function(e){var n=e.person,t=e.onDelete;return Object(o.jsxs)("div",{children:[Object(o.jsxs)("p",{style:{display:"inline"},children:[n.name," ",n.number]}),Object(o.jsx)("button",{onClick:t,children:"Delete"})]})},d=function(e){var n=e.newSearch,t=e.onChange,c=e.displayAll;return Object(o.jsxs)("div",{children:["Filter: ",Object(o.jsx)("input",{style:{display:"inline"},value:n,onChange:t}),Object(o.jsx)("button",{onClick:c,children:"Display All"})]})},b=t(4),f=t.n(b),j="/api/persons",h=function(){return f.a.get(j).then((function(e){return e.data}))},m=function(e){return f.a.post(j,e).then((function(e){return e.data}))},p=function(e,n){return f.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){return f.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},v=function(e){var n=e.message,t={color:"green",fontStyle:"italic",fontSize:16,border:"3px solid green"};return null===n?null:"object"===typeof n?(t={color:"red",fontStyle:"bold",fontSize:16,border:"3px solid red"},Object(o.jsx)("div",{style:t,children:n.error})):(n.includes("not")&&(t={color:"red",fontStyle:"bold",fontSize:16,border:"3px solid red"}),Object(o.jsx)("div",{style:t,children:n}))},x=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],i=Object(c.useState)(""),b=Object(u.a)(i,2),f=b[0],j=b[1],x=Object(c.useState)(""),g=Object(u.a)(x,2),w=g[0],S=g[1],y=Object(c.useState)(""),C=Object(u.a)(y,2),N=C[0],k=C[1],D=Object(c.useState)(t),A=Object(u.a)(D,2),T=A[0],z=A[1],I=Object(c.useState)(null),E=Object(u.a)(I,2),J=E[0],_=E[1];Object(c.useEffect)((function(){h().then((function(e){r(e),z(e)}))}),[]);return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(d,{newSearch:N,onChange:function(e){k(e.target.value);var n=N;if(""===n)z(t);else{var o=t.filter((function(e){return e.name.slice(0,n.length).includes(n)}));z(o)}},displayAll:function(){return z(t)}}),Object(o.jsx)("h3",{children:"Add a new person to the phonebook"}),Object(o.jsx)(v,{message:J}),Object(o.jsx)(s,{onSubmit:function(e){e.preventDefault();var n={name:f,number:w};if(t.filter((function(e){return e.name===n.name})).length>0){if(window.confirm("".concat(n.name," is already in the phonebook, replace the old number with a new one?"))){var o=t.find((function(e){return e.name===n.name})),c=Object(a.a)(Object(a.a)({},o),{},{number:n.number});p(c.id,c).then((function(e){var n=t.map((function(n){return n.id===c.id?e:n}));r(n),z(n),j(""),S(""),_("".concat(c.name,"\xb4s number was updated")),setTimeout((function(){_(null)}),3e3)})).catch((function(e){e.response.data.error.includes("number")?_(e.response.data):_("Information on ".concat(c.name," was not found, it has been removed from the server")),j(""),S(""),h().then((function(e){r(e),z(e)})),setTimeout((function(){_(null)}),3e3)}))}}else m(n).then((function(e){r(t.concat(e)),z(t.concat(e)),j(""),S(""),_("".concat(n.name," was added to the phonebook")),setTimeout((function(){_(null)}),3e3)})).catch((function(e){_(e.response.data),setTimeout((function(){_(null)}),3e3),j(""),S("")}))},newName:f,newNumber:w,onChangeName:function(e){j(e.target.value)},onChangeNumber:function(e){S(e.target.value)}}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)("div",{children:T.map((function(e,n){return Object(o.jsx)(l,{person:e,onDelete:function(){return function(e){var n=t.filter((function(n){return n.id===e})),o=Object(a.a)({},n[0]);window.confirm("Delete ".concat(o.name," ?"))&&O(e).then((function(n){var o=t.filter((function(n){return n.id!==e}));r(o),z(o)})).catch((function(e){_("Information on ".concat(o.name," was not found, it has been removed from the server")),j(""),S(""),h().then((function(e){r(e),z(e)})),setTimeout((function(){_(null)}),3e3)}))}(e.id)}},n+1)}))})]})};t(38);i.a.render(Object(o.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.8dc36639.chunk.js.map